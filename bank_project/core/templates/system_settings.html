{% extends 'base.html' %}
{% load static %}

{% block title %}Param√®tres du syst√®me{% endblock %}

{% block content %}
<link rel="stylesheet" href="{% static 'css/system_settings.css' %}">
<link rel="stylesheet" href="{% static 'css/dashboard.css' %}">

<div class="dashboard">
    {% include 'sidebar_admin.html' %}

    <main class="main-content">

        <div class="main-header">
            <div class="main-header-left">
                <div class="main-title-row">
                    <span class="main-title-icon">‚öôÔ∏è</span>
                    <span class="main-title-text">Param√®tres du syst√®me</span>
                </div>
                <span class="main-subtitle">Configuration globale, s√©curit√© et statistiques</span>
            </div>
        </div>

        <!-- PANEL PARAM√àTRES -->
        <div class="panel">
            <div class="panel-header">
                <span class="panel-title">Configuration g√©n√©rale</span>
            </div>

            <form method="POST" class="filter-form">
                {% csrf_token %}

                <div class="settings-grid">

                    <!-- MONTANT MAX TRANSFERT -->
                    <div class="settings-item">
                        <label>Montant maximal de transfert (‚Ç¨) :</label>
                        {{ form.max_transfer_amount }}
                        <small class="setting-help">
                            Limite le montant maximal autoris√© pour une seule transaction.
                            Permet de r√©duire les risques de fraude ou d‚Äôerreurs importantes.
                        </small>
                    </div>

                    <!-- LIMITE ECHECS LOGIN -->
                    <div class="settings-item">
                        <label>Limite d'√©checs de connexion :</label>
                        {{ form.failed_login_limit }}
                        <small class="setting-help">
                            Nombre maximum de tentatives rat√©es avant le blocage temporaire
                            d'un compte. Prot√®ge contre les attaques par force brute.
                        </small>
                    </div>

                    <!-- ACTIVER LOGS -->
                    <div class="settings-item">
                        <label>Activer les logs :</label>
                        {{ form.enable_logs }}
                        <small class="setting-help">
                            Enregistre les actions sensibles (connexions, virements, alertes‚Ä¶)
                            pour faciliter le suivi et les audits de s√©curit√©.
                        </small>
                    </div>

                </div>

                <!-- PANEL S√âCURIT√â -->
                <div class="panel-header" style="margin-top:32px;">
                    <span class="panel-title">S√©curit√© renforc√©e</span>
                </div>

                <div class="settings-grid">

                    <!-- DUR√âE SESSION -->
                    <div class="settings-item">
                        <label>Dur√©e session (minutes) :</label>
                        {{ form.session_timeout_minutes }}
                        <small class="setting-help">
                            Dur√©e maximale d‚Äôinactivit√© avant la d√©connexion automatique.
                            R√©duit le risque d'acc√®s non autoris√©.
                        </small>
                    </div>

                    <!-- MOT DE PASSE FORT -->
                    <div class="settings-item">
                        <label>Mot de passe fort obligatoire :</label>
                        {{ form.strong_password_required }}
                        <small class="setting-help">
                            Impose des r√®gles strictes sur les mots de passe (longueur,
                            chiffres, majuscules, symboles) pour garantir une meilleure s√©curit√©.
                        </small>
                    </div>

                

                    <!-- INSCRIPTIONS -->
                    <div class="settings-item">
                        <label>Autoriser nouvelles inscriptions :</label>
                        {{ form.allow_registrations }}
                        <small class="setting-help">
                            Active ou d√©sactive la cr√©ation de nouveaux comptes utilisateur.
                            Utile pour restreindre temporairement l'acc√®s au service.
                        </small>
                    </div>

                </div>

                <button class="pill-button pill-button-primary" style="margin-top:25px;">
                    üíæ Enregistrer les param√®tres
                </button>
            </form>
        </div>

        <!-- STATS -->
        <div class="panel" style="margin-top:35px;">
            <div class="panel-header">
                <span class="panel-title">Statistiques du syst√®me</span>
            </div>

            <div class="stats-grid">

                <div class="stats-card">
                    <div class="stats-value">{{ stats.total_users }}</div>
                    <div class="stats-label">Utilisateurs enregistr√©s</div>
                </div>

                <div class="stats-card">
                    <div class="stats-value">{{ stats.admin_count }}</div>
                    <div class="stats-label">Administrateurs</div>
                </div>

                <div class="stats-card">
                    <div class="stats-value">{{ stats.total_balance }} ‚Ç¨</div>
                    <div class="stats-label">Solde total cumul√©</div>
                </div>

                <div class="stats-card">
                    <div class="stats-value">{{ stats.transactions_today }}</div>
                    <div class="stats-label">Transactions aujourd'hui</div>
                </div>

                <div class="stats-card">
                    <div class="stats-value">{{ stats.logs_today }}</div>
                    <div class="stats-label">Alertes s√©curit√© (24h)</div>
                </div>

            </div>
        </div>

        <!-- ACTIONS RAPIDES -->
        <div class="panel" style="margin-top:35px;">
            <div class="panel-header">
                <span class="panel-title">Actions rapides</span>
            </div>

            <div class="actions-grid">
                <a class="action-button danger" href="#">üóë Purger les logs</a>
                <a class="action-button warning" href="#">üßπ Nettoyer transactions anciennes</a>
                <a class="action-button critical" href="#">‚õî D√©connexion globale</a>
            </div>
        </div>

    </main>
</div>

{% endblock %}
